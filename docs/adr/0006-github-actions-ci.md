# 6. GitHub Actionsによる継続的インテグレーションの設定

## ステータス
採用済み ✅

## 日付
2025-05-13

## 文脈
- プロジェクトの品質を継続的に保証する必要がある
- 手動でのテストやコード品質チェックは時間がかかり、ヒューマンエラーの可能性がある
- セキュリティチェックを自動化する必要がある

## 決定
GitHub Actionsを使用して以下の3つの独立したジョブを設定する：

1. テスト（test）
   - RSpecによるテスト実行
   - SimpleCovによるカバレッジレポート生成
   - 最小カバレッジ要件：90%

2. リンター（lint）
   - Rubocopによるコードスタイルチェック
   - Rails Best Practicesによるベストプラクティスチェック
   - Rails 8 Omakaseスタイルの採用

3. セキュリティ（security）
   - Brakemanによるセキュリティスキャン
   - 警告レベル3以上を対象

## 結果
- 自動化されたテスト実行により、品質の継続的な保証が可能に
- コードスタイルの統一性が保たれる
- セキュリティ上の問題を早期に発見可能
- 開発者の作業効率が向上

## 代替案
1. CircleCI
   - 理由：GitHub Actionsの方が統合が容易で、設定がシンプル
2. Jenkins
   - 理由：インフラ管理のオーバーヘッドを避けたい
3. GitLab CI
   - 理由：既存のGitHubリポジトリとの統合が自然

## 影響
### 肯定的
- 継続的な品質保証が可能
- 開発者の作業効率向上
- 早期の問題発見
- コードレビューの効率化

### 否定的
- CIの実行時間による開発の遅延
- GitHub Actionsの実行時間制限
- 設定の保守が必要

## 備考
- 将来的にデプロイメントの自動化も検討
- テストカバレッジの要件は段階的に引き上げる可能性あり
- セキュリティスキャンの範囲は必要に応じて拡大

## 注意点
- テストカバレッジは90%以上を維持する
- Rubocopの設定は必要に応じて調整する
- セキュリティアラートは優先的に対応する

## 関連
- ADR-0001: アーキテクチャ決定記録の使用
- ADR-0003: PostgreSQLとRedisの使用 