<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="bg-white shadow rounded-lg overflow-hidden">
    <div class="p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center space-x-4">
          <div class="flex-shrink-0">
            <% if @post.user.avatar.attached? %>
              <%= image_tag @post.user.avatar, class: "h-12 w-12 rounded-full" %>
            <% else %>
              <div class="h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center">
                <span class="text-gray-500 text-lg font-medium">
                  <%= @post.user.name&.first || 'A' %>
                </span>
              </div>
            <% end %>
          </div>
          <div>
            <h2 class="text-xl font-semibold text-gray-900"><%= @post.title %></h2>
            <div class="flex items-center space-x-2 text-sm text-gray-500">
              <span><%= @post.user.name || 'Anonymous' %></span>
              <span>â€¢</span>
              <span><%= @post.created_at.strftime("%B %d, %Y") %></span>
            </div>
          </div>
        </div>
        <% if @post.editable_by?(current_user) %>
          <div class="flex space-x-4">
            <%= link_to t('.edit'), edit_post_path(@post), class: 'text-blue-600 hover:text-blue-800 font-medium' %>
            <%= button_to t('.delete'), post_path(@post), method: :delete, class: 'text-red-600 hover:text-red-800 font-medium', form: { data: { controller: 'confirmation', action: 'confirmation#confirm' } } %>
          </div>
        <% end %>
      </div>

      <div class="prose max-w-none">
        <%= simple_format @post.content %>
      </div>

      <div class="mt-6 flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="flex items-center space-x-2">
            <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
            <span class="text-gray-500"><%= @post.likes.count %></span>
          </div>
          <div class="flex items-center space-x-2">
            <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
            <span class="text-gray-500"><%= @post.comments.count %></span>
          </div>
        </div>
        <div>
          <%= link_to t('.comment'), '#', class: 'text-blue-600 hover:text-blue-800 font-medium' %>
        </div>
      </div>
    </div>
  </div>

  <% if @post.editable_by?(current_user) %>
    <div data-controller="confirmation" class="hidden">
      <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" data-confirmation-target="overlay"></div>
      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
          <div class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
            <div class="sm:flex sm:items-start">
              <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                </svg>
              </div>
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                <h3 class="text-base font-semibold leading-6 text-gray-900"><%= t('.confirmation.title') %></h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500"><%= t('.confirmation.message') %></p>
                </div>
              </div>
            </div>
            <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
              <button type="button" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto" data-confirmation-target="confirmButton"><%= t('.confirmation.confirm') %></button>
              <button type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" data-confirmation-target="cancelButton"><%= t('.confirmation.cancel') %></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div> 