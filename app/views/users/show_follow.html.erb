<div class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6"><%= @title %></h1>
  
  <% if @users.any? %>
    <div class="space-y-4">
      <% @users.each do |user| %>
        <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow">
          <div class="flex items-center space-x-4">
            <div class="flex-shrink-0">
              <% if user.avatar.attached? %>
                <%= image_tag user.avatar, class: 'w-12 h-12 rounded-full object-cover' %>
              <% else %>
                <%= image_tag 'default-avatar.png', class: 'w-12 h-12 rounded-full object-cover', alt: user.name %>
              <% end %>
            </div>
            <div>
              <h3 class="font-semibold"><%= link_to user.name, user_path(user), class: 'hover:underline' %></h3>
              <p class="text-gray-600 text-sm">@<%= user.username %></p>
            </div>
          </div>
          
          <% if current_user != user %>
            <div class="follow-button">
              <% if current_user.following?(user) %>
                <%= button_to 'フォロー中', relationship_path(user), 
                    method: :delete, 
                    class: 'px-4 py-2 bg-gray-200 text-gray-800 rounded-full hover:bg-gray-300 transition',
                    form: { class: 'inline' } %>
              <% else %>
                <%= button_to 'フォローする', relationships_path(followed_id: user.id), 
                    class: 'px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition',
                    form: { class: 'inline' } %>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
    
    <div class="mt-6">
      <%= paginate @users %>
    </div>
  <% else %>
    <div class="text-center py-8">
      <p class="text-gray-500">ユーザーが見つかりません。</p>
    </div>
  <% end %>
  
  <div class="mt-6">
    <%= link_to '戻る', :back, class: 'text-blue-500 hover:underline' %>
  </div>
</div>
